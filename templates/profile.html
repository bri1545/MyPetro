<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å - –ú–æ–π –ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="bg-gray-50">
    {{template "header" .}}
    
    <main class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-lg shadow-md p-8 mb-6">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h1>
                        {{if .Stats}}
                        <p class="text-lg text-purple-600 font-semibold mt-1">üèÜ {{.Stats.Title}}</p>
                        {{end}}
                    </div>
                    {{if .IsAdmin}}
                    <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                    {{else}}
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">–ñ–∏—Ç–µ–ª—å</span>
                    {{end}}
                </div>
                
                <div class="space-y-4">
                    <div class="border-b pb-4">
                        <label class="text-sm font-semibold text-gray-600">ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <p class="text-lg text-gray-900">#{{.UserID}}</p>
                    </div>
                    
                    <div class="border-b pb-4">
                        <label class="text-sm font-semibold text-gray-600">–ù–∏–∫–Ω–µ–π–º</label>
                        <p class="text-lg text-gray-900">{{if .Nickname}}{{.Nickname}}{{else}}–ù–µ —É–∫–∞–∑–∞–Ω{{end}}</p>
                    </div>
                    
                    <div class="border-b pb-4">
                        <label class="text-sm font-semibold text-gray-600">Email</label>
                        <p class="text-lg text-gray-900">{{.Email}}</p>
                    </div>
                    
                    <div class="border-b pb-4">
                        <label class="text-sm font-semibold text-gray-600">–†–æ–ª—å</label>
                        <p class="text-lg text-gray-900">{{if .IsAdmin}}–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä{{else}}–ñ–∏—Ç–µ–ª—å{{end}}</p>
                    </div>
                    
                </div>
            </div>

            {{if .Stats}}
            <div class="bg-white rounded-lg shadow-md p-8 mb-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="bg-blue-50 rounded-lg p-4 text-center">
                        <div class="text-3xl font-bold text-blue-600">{{.Stats.VotesCount}}</div>
                        <div class="text-sm text-gray-600 mt-1">–ì–æ–ª–æ—Å–æ–≤ –æ—Ç–¥–∞–Ω–æ</div>
                    </div>
                    <div class="bg-green-50 rounded-lg p-4 text-center">
                        <div class="text-3xl font-bold text-green-600">{{.Stats.ProjectsCount}}</div>
                        <div class="text-sm text-gray-600 mt-1">–ò–¥–µ–π –ø–æ–¥–∞–Ω–æ</div>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-4 text-center">
                        <div class="text-3xl font-bold text-purple-600">{{.Stats.ApprovedProjectsCount}}</div>
                        <div class="text-sm text-gray-600 mt-1">–ò–¥–µ–π –æ–¥–æ–±—Ä–µ–Ω–æ</div>
                    </div>
                    <div class="bg-yellow-50 rounded-lg p-4 text-center">
                        <div class="text-3xl font-bold text-yellow-600">{{.Stats.WinningProjectsCount}}</div>
                        <div class="text-sm text-gray-600 mt-1">–ü–æ–±–µ–¥</div>
                    </div>
                    <div class="bg-indigo-50 rounded-lg p-4 text-center">
                        <div class="text-3xl font-bold text-indigo-600">{{.Stats.CommentsCount}}</div>
                        <div class="text-sm text-gray-600 mt-1">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</div>
                    </div>
                </div>
            </div>
            {{end}}

            {{if .Achievements}}
            <div class="bg-white rounded-lg shadow-md p-8 mb-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">üèÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {{range .Achievements}}
                    {{$achievement := .Achievement}}
                    {{$unlocked := .Unlocked}}
                    <div class="border rounded-lg p-4 {{if $unlocked}}bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-300{{else}}bg-gray-50 border-gray-200 opacity-60{{end}}">
                        <div class="flex items-start">
                            <div class="text-4xl mr-4 {{if not $unlocked}}grayscale{{end}}">{{$achievement.Icon}}</div>
                            <div class="flex-1">
                                <h3 class="font-bold text-gray-900 mb-1">{{$achievement.Title}}</h3>
                                <p class="text-sm text-gray-600">{{$achievement.Description}}</p>
                                {{if $unlocked}}
                                <div class="mt-2">
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-semibold">‚úì –ü–æ–ª—É—á–µ–Ω–æ</span>
                                </div>
                                {{else}}
                                <div class="mt-2">
                                    <span class="text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full">üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</span>
                                </div>
                                {{end}}
                            </div>
                        </div>
                    </div>
                    {{end}}
                </div>
            </div>
            {{end}}
            
            {{if gt .ProjectCount 0}}
            <div class="bg-white rounded-lg shadow-md p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">–ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã</h2>
                <div class="space-y-4">
                    {{range .Projects}}
                    <div class="border rounded-lg p-4 hover:bg-gray-50 transition">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold text-gray-900 mb-1">{{.Title}}</h3>
                                <p class="text-gray-600 text-sm mb-2">{{.Category}} ‚Ä¢ {{.District}}</p>
                                <p class="text-gray-700 line-clamp-2">{{.Description}}</p>
                            </div>
                            <div class="ml-4">
                                {{if eq .Status "moderation"}}
                                <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-semibold">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</span>
                                {{else if eq .Status "voting"}}
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</span>
                                {{else if eq .Status "selected"}}
                                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-semibold">–ü–æ–±–µ–¥–∏—Ç–µ–ª—å</span>
                                {{else if eq .Status "in_progress"}}
                                <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-semibold">–í —Ä–∞–±–æ—Ç–µ</span>
                                {{else if eq .Status "done"}}
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">–ó–∞–≤–µ—Ä—à—ë–Ω</span>
                                {{else if eq .Status "rejected"}}
                                <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">–û—Ç–∫–ª–æ–Ω—ë–Ω</span>
                                {{end}}
                            </div>
                        </div>
                        <div class="mt-4 flex justify-between items-center">
                            <div class="text-sm text-gray-600">
                                <span class="font-semibold">–ë—é–¥–∂–µ—Ç:</span> {{.Budget}} ‚Ç∏ ‚Ä¢ 
                                <span class="font-semibold">–ì–æ–ª–æ—Å–æ–≤:</span> {{.VoteCount}}
                            </div>
                            <a href="/projects/{{.ID}}" class="text-blue-600 hover:text-blue-700 text-sm font-semibold">–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</a>
                        </div>
                    </div>
                    {{end}}
                </div>
            </div>
            {{end}}
        </div>
    </main>
</body>
</html>

